<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis Algebraico de Ecuaciones Cúbicas</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Fira+Code&display=swap" rel="stylesheet">
    
    <script>
        MathJax = {
            tex: { inlineMath: [['\\(', '\\)']], displayMath: [['\\[', '\\]']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

    <style>
        :root {
            --bg-color: #f4f5f7;
            --surface-color: #ffffff;
            --border-color: #e2e8f0;
            --text-color: #4a5568;
            --heading-color: #1a202c;
            --accent-color: #4299e1;
            --accent-hover: #2b6cb0;
            --success-color: #48bb78;
            --warning-color: #ed8936;
            --error-color: #f56565;
            --info-color: #3182ce;
            --shadow-color: rgba(0, 0, 0, 0.05);
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.7;
            font-size: 16px;
        }

        .container { max-width: 1200px; margin: 2rem auto; padding: 0 1.5rem; }
        .header { text-align: center; margin-bottom: 3rem; }
        .header h1 { font-size: 2.8rem; color: var(--heading-color); margin-bottom: 0.5rem; }
        .header p { font-size: 1.1rem; color: var(--text-color); max-width: 650px; margin: 0 auto; }

        .tabs { display: flex; border-bottom: 2px solid var(--border-color); margin-bottom: 2rem; }
        .tab-button {
            padding: 1rem 1.5rem; cursor: pointer; background: none; border: none;
            color: var(--text-color); font-size: 1rem; font-weight: 500;
            position: relative; transition: color 0.3s ease;
        }
        .tab-button::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 100%; height: 2px; background-color: var(--accent-color); transform: scaleX(0); transform-origin: center; transition: transform 0.3s ease; }
        .tab-button.active, .tab-button:hover { color: var(--accent-color); }
        .tab-button.active::after { transform: scaleX(1); }

        .tab-content { display: none; animation: fadeIn 0.5s ease-out; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card { background-color: var(--surface-color); border: 1px solid var(--border-color); border-radius: 12px; padding: 2rem; margin-bottom: 1.5rem; box-shadow: 0 4px 15px var(--shadow-color); }
        
        h3 { color: var(--heading-color); margin-bottom: 1.5rem; font-size: 1.4rem; }
        
        .accordion-item { border-bottom: 1px solid var(--border-color); }
        .accordion-item:last-child { border-bottom: none; }
        .accordion-button { display: flex; justify-content: space-between; align-items: center; width: 100%; padding: 1.5rem 0; background: none; border: none; color: var(--heading-color); font-size: 1.2rem; font-weight: 700; text-align: left; cursor: pointer; transition: color 0.2s ease; }
        .accordion-button:hover { color: var(--accent-hover); }
        .accordion-icon { transition: transform 0.3s ease; width: 24px; height: 24px; }
        .accordion-button[aria-expanded="true"] .accordion-icon { transform: rotate(180deg); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; }
        .accordion-content .content-inner { padding-bottom: 1.5rem; }
        .accordion-content .content-inner p, .accordion-content .content-inner ul, .accordion-content .content-inner .timeline { margin-bottom: 1rem; }
        .accordion-content .content-inner ul { padding-left: 20px; }
        .math-display { display: block; text-align: center; margin: 1.5rem 0; overflow-x: auto; }

        .timeline-item { position: relative; padding-left: 30px; margin-bottom: 1.5rem; }
        .timeline-item::before { content: ''; position: absolute; left: 6px; top: 6px; width: 14px; height: 14px; background-color: var(--accent-color); border: 2px solid var(--surface-color); border-radius: 50%; z-index: 1; }
        .timeline-item::after { content: ''; position: absolute; left: 12px; top: 20px; width: 2px; height: 100%; background-color: var(--border-color); }
        .timeline-item:last-child::after { display: none; }
        .timeline-date { font-weight: 700; color: var(--heading-color); display: block; margin-bottom: 0.25rem; }

        .calculator-layout { display: grid; grid-template-columns: 380px 1fr; gap: 2rem; }
        
        .slider-group { margin-bottom: 1.5rem; }
        .slider-group label { display: flex; justify-content: space-between; font-weight: 500; margin-bottom: 0.5rem; }
        .slider { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: var(--border-color); border-radius: 4px; outline: none; cursor: pointer; }
        .slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 22px; height: 22px; background: var(--accent-color); border-radius: 50%; border: 3px solid var(--surface-color); cursor: pointer; box-shadow: 0 0 5px rgba(0,0,0,0.2); transition: background 0.2s ease; }
        .slider:hover::-webkit-slider-thumb, .slider:focus::-webkit-slider-thumb { background: var(--accent-hover); }
        
        #currentEquation { font-family: 'Fira Code', monospace; background-color: var(--bg-color); padding: 1rem; border-radius: 8px; text-align: center; font-size: 1.1rem; border: 1px solid var(--border-color); min-height: 50px; }

        .result-item { padding: 1rem; border-radius: 8px; margin-bottom: 1rem; font-family: 'Fira Code', monospace; font-size: 1rem; border-left: 4px solid; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
        .result-item .approx-value { font-size: 0.9em; color: var(--text-color); background-color: var(--bg-color); padding: 0.2rem 0.5rem; border-radius: 4px; margin-left: 1rem; }
        .result-discriminant.success { border-color: var(--success-color); background-color: #f0fff4; }
        .result-discriminant.warning { border-color: var(--warning-color); background-color: #fffaf0; }
        .result-discriminant.error { border-color: var(--error-color); background-color: #fff5f5; }
        #rootsDisplay .result-item { border-color: var(--accent-color); background-color: #ebf8ff; }
        
        #stepByStep .step { padding: 1rem; margin-bottom: 1rem; border-radius: 8px; background-color: var(--bg-color); border: 1px solid var(--border-color); }
        .step-title { font-weight: 700; color: var(--heading-color); margin-bottom: 0.5rem; display: block; border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem; }
        .step-content { font-family: 'Fira Code', monospace; }

        #dynamicGraphContainer { text-align: center; position: relative; }
        .dynamic-svg { width: 100%; height: auto; border: 1px solid var(--border-color); border-radius: 8px; background-color: #fafbfd; animation: breathe 0.5s ease-out; }
        @keyframes breathe { from { opacity: 0.5; } to { opacity: 1; } }
        .svg-grid { stroke: var(--border-color); stroke-width: 0.5; }
        .svg-axis { stroke: var(--text-color); stroke-width: 1; }
        .svg-curve { stroke: var(--accent-color); stroke-width: 2.5; fill: none; }
        .svg-root { fill: var(--error-color); stroke: var(--surface-color); stroke-width: 1.5; }
        .svg-text { font-size: 10px; fill: var(--text-color); font-family: 'Inter', sans-serif; }
        .svg-root-label { font-size: 11px; fill: var(--error-color); font-weight: 500; font-family: 'Fira Code', monospace; }

        @media (max-width: 992px) { .calculator-layout { grid-template-columns: 1fr; } }
        @media (max-width: 768px) { .tabs { flex-wrap: wrap; } .tab-button { flex-basis: 50%; } .header h1 { font-size: 2.2rem; } }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Análisis Algebraico de Ecuaciones Cúbicas</h1>
            <p>Una herramienta interactiva para explorar la solución, la teoría y la fascinante historia de las ecuaciones de tercer grado.</p>
        </header>

        <nav class="tabs">
            <button class="tab-button active" data-tab="calculator">Calculadora</button>
            <button class="tab-button" data-tab="theory">Teoría</button>
            <button class="tab-button" data-tab="history">Historia</button>
            <button class="tab-button" data-tab="examples">Ejemplos</button>
        </nav>

        <main>
            <!-- Calculadora -->
            <div id="calculator" class="tab-content active">
                <div class="calculator-layout">
                    <div class="input-panel card">
                        <h3>Coeficientes de la Ecuación</h3>
                        <div class="math-display">\[ax^3 + bx^2 + cx + d = 0\]</div>
                        <div id="error-message-a" class="result-item error" style="display:none;">'a' no puede ser cero.</div>
                        <div class="slider-group">
                            <label for="sliderA">Coeficiente a: <span id="valueA">1</span></label>
                            <input type="range" id="sliderA" class="slider" min="-5" max="5" step="0.1" value="1">
                        </div>
                        <div class="slider-group">
                            <label for="sliderB">Coeficiente b: <span id="valueB">0</span></label>
                            <input type="range" id="sliderB" class="slider" min="-10" max="10" step="0.1" value="0">
                        </div>
                        <div class="slider-group">
                            <label for="sliderC">Coeficiente c: <span id="valueC">-3</span></label>
                            <input type="range" id="sliderC" class="slider" min="-10" max="10" step="0.1" value="-3">
                        </div>
                        <div class="slider-group">
                            <label for="sliderD">Coeficiente d: <span id="valueD">1</span></label>
                            <input type="range" id="sliderD" class="slider" min="-10" max="10" step="0.1" value="1">
                        </div>
                        <h3>Ecuación Actual:</h3>
                        <div id="currentEquation"></div>
                    </div>
                    <div class="results-panel">
                        <div class="card">
                           <h3>Análisis y Resultados</h3>
                            <div id="discriminantDisplay" class="result-item"></div>
                            <div id="caseDescription" class="result-item"></div>
                            <h3>Raíces</h3>
                            <div id="rootsDisplay"></div>
                        </div>
                         <div class="card">
                            <h3>Gráfico de la Función</h3>
                            <div id="dynamicGraphContainer"></div>
                        </div>
                    </div>
                </div>
                <div class="card" id="stepByStep"></div>
            </div>
            
            <div id="theory" class="tab-content"></div>
            <div id="history" class="tab-content"></div>
            <div id="examples" class="tab-content"></div>
        </main>
    </div>

    <script>
        // --- GLOBAL STATE ---
        const sliders = {};
        const valueSpans = {};
        const EPSILON = 1e-9;

        // --- UI INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            initializeTabs();
            initializeSliders();
            fillStaticContent();
            updateAll();
        });

        function initializeTabs() {
            document.querySelector('.tabs').addEventListener('click', (event) => {
                const button = event.target.closest('.tab-button');
                if (button) showTab(button.dataset.tab);
            });
        }

        function initializeSliders() {
            ['A', 'B', 'C', 'D'].forEach(coeff => {
                sliders[coeff] = document.getElementById(`slider${coeff}`);
                valueSpans[coeff] = document.getElementById(`value${coeff}`);
                sliders[coeff].addEventListener('input', (e) => {
                    valueSpans[coeff].textContent = e.target.value;
                    const percent = (e.target.value - e.target.min) / (e.target.max - e.target.min) * 100;
                    e.target.style.background = `linear-gradient(to right, #4299e1 ${percent}%, #e2e8f0 ${percent}%)`;
                    requestAnimationFrame(updateAll);
                });
                sliders[coeff].dispatchEvent(new Event('input'));
            });
        }
        
        // --- CORE LOGIC ---
        function updateAll() {
            const a = parseFloat(sliders.A.value), b = parseFloat(sliders.B.value), c = parseFloat(sliders.C.value), d = parseFloat(sliders.D.value);
            const errorMessageA = document.getElementById('error-message-a');
            if (Math.abs(a) < EPSILON) { errorMessageA.style.display = 'flex'; return; } 
            else { errorMessageA.style.display = 'none'; }
            const solution = solveCubic(a, b, c, d);
            displayEquation(a, b, c, d);
            displayResults(solution);
            drawDynamicGraph(a, b, c, d, solution.roots);
            if (window.MathJax && typeof MathJax.typesetPromise === 'function') { MathJax.typesetPromise(); }
        }
        
        function solveCubic(a, b, c, d) {
            const p = (3 * a * c - b * b) / (3 * a * a);
            const q = (2 * b**3 - 9 * a * b * c + 27 * a * a * d) / (27 * a**3);
            const discriminant = -4 * p**3 - 27 * q**2;
            const results = { p, q, discriminant, roots: [], complex_roots: [] };
            if (Math.abs(discriminant) < EPSILON) {
                results.case = 'Raíces Múltiples (\\(\\Delta \\approx 0\\))';
                results.roots = Math.abs(p) < EPSILON ? [-b/(3*a), -b/(3*a), -b/(3*a)] : [(3*q/p)-(b/(3*a)), (-3*q/(2*p))-(b/(3*a)), (-3*q/(2*p))-(b/(3*a))];
            } else if (discriminant > 0) {
                results.case = 'Tres Raíces Reales (\\(\\Delta > 0\\))';
                const arg = Math.max(-1, Math.min(1, (3 * q) / (2 * p) * Math.sqrt(-3 / p)));
                const theta = Math.acos(arg);
                for (let k = 0; k < 3; k++) { results.roots.push(2 * Math.sqrt(-p / 3) * Math.cos((theta + 2 * Math.PI * k) / 3) - b / (3 * a)); }
            } else {
                results.case = 'Una Raíz Real, Dos Complejas (\\(\\Delta < 0\\))';
                const term = Math.sqrt(-discriminant / 108);
                const u = Math.cbrt(-q / 2 + term);
                const v = Math.cbrt(-q / 2 - term);
                results.roots.push(u + v - b / (3 * a));
                const real_part = -(u + v) / 2 - b / (3 * a), imag_part = (u - v) * Math.sqrt(3) / 2;
                if (Math.abs(imag_part) > EPSILON) { results.complex_roots.push({ real: real_part, imag: imag_part }); }
            }
            results.roots.sort((x, y) => x - y);
            return results;
        }

        // --- DISPLAY & UI FUNCTIONS ---
        function showTab(tabName) {
            document.querySelectorAll('.tab-content, .tab-button').forEach(el => el.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            document.querySelector(`.tab-button[data-tab="${tabName}"]`).classList.add('active');
        }

        function displayEquation(a, b, c, d) {
            const format = (v, t, f) => { if (Math.abs(v) < EPSILON) return ''; const s = f ? (v < 0 ? '-' : '') : (v < 0 ? ' - ' : ' + '); const av = Math.abs(v); const n = av.toFixed(1).replace(/\.0$/, ''); return (Math.abs(av - 1) < EPSILON && t) ? `${s}${t}` : `${s}${n}${t}`; };
            document.getElementById('currentEquation').innerHTML = `\\[${(format(a,'x^3',1) + format(b,'x^2',0) + format(c,'x',0) + format(d,'',0)).trim()} = 0\\]`;
        }

        function gcd(a, b) { return b === 0 ? a : gcd(b, a % b); }
        function formatExactValue(num) {
            if (Math.abs(num) < EPSILON) return '0'; if (Math.abs(num - Math.round(num)) < EPSILON) return Math.round(num).toString();
            for (let d = 2; d <= 32; d++) { if (Math.abs(num * d - Math.round(num * d)) < EPSILON) { const n = Math.round(num * d), c = gcd(Math.abs(n), d); return `${n/c}/${d/c}`; } } return num.toFixed(8);
        }

        function displayResults(res) {
            const discClass = res.discriminant > EPSILON ? 'success' : Math.abs(res.discriminant) < EPSILON ? 'warning' : 'error';
            document.getElementById('discriminantDisplay').className = `result-item result-discriminant ${discClass}`;
            document.getElementById('discriminantDisplay').innerHTML = `<span><strong>Discriminante:</strong> \\(\\Delta = ${formatExactValue(res.discriminant)}\\)</span><span class="approx-value">≈ ${res.discriminant.toFixed(2)}</span>`;
            document.getElementById('caseDescription').className = `result-item result-discriminant ${discClass}`;
            document.getElementById('caseDescription').innerHTML = `<strong>Caso:</strong> ${res.case}`;
            let rootsHTML = '';
            res.roots.forEach((r, i) => { rootsHTML += `<div class="result-item"><span>\\(x_{${i+1}} = ${formatExactValue(r)}\\)</span><span class="approx-value">≈ ${r.toFixed(2)}</span></div>`; });
            res.complex_roots.forEach(cr => { rootsHTML += `<div class="result-item"><span>\\(x_{2,3} = ${formatExactValue(cr.real)} \\pm ${formatExactValue(Math.abs(cr.imag))}i\\)</span><span class="approx-value">≈ ${cr.real.toFixed(2)} ± ${Math.abs(cr.imag).toFixed(2)}i</span></div>`; });
            document.getElementById('rootsDisplay').innerHTML = rootsHTML;
            document.getElementById('stepByStep').innerHTML = `<h3>Resolución Paso a Paso</h3><div class="step"><span class="step-title">1: Reducción</span><div class="step-content">\\(x = y - b/3a\\) produce \\(y^3+py+q=0\\).<br>\\(p ≈ ${res.p.toFixed(4)}\\), \\(q ≈ ${res.q.toFixed(4)}\\)</div></div><div class="step"><span class="step-title">2: Discriminante</span><div class="step-content">\\(\\Delta = -4p^3 - 27q^2 ≈ ${res.discriminant.toFixed(4)}\\).</div></div><div class="step"><span class="step-title">3: Solución</span><div class="step-content">Se usa la fórmula general para hallar \\(y\\), y luego \\(x\\).</div></div>`;
        }
        
        function drawDynamicGraph(a, b, c, d, roots) {
            const container = document.getElementById('dynamicGraphContainer');
            const f = x => a*x**3 + b*x**2 + c*x + d;
            
            const crit_delta = (2*b)**2 - 4*(3*a)*c, crit_points = [];
            if (crit_delta >= 0) { crit_points.push((-2*b + Math.sqrt(crit_delta))/(6*a), (-2*b - Math.sqrt(crit_delta))/(6*a)); }
            
            const all_points = [...roots, ...crit_points];
            let x_min = Math.min(...all_points), x_max = Math.max(...all_points);
            const range = x_max - x_min;
            if (range < 1 || !isFinite(range)) { x_min = -5; x_max = 5; } else { x_min -= range * 0.3; x_max += range * 0.3; }
            
            const plot_points = [];
            let y_min = Infinity, y_max = -Infinity;
            for (let i = 0; i <= 200; i++) {
                const x = x_min + i * (x_max - x_min) / 200, y = f(x);
                if (isFinite(y)) { y_min = Math.min(y_min, y); y_max = Math.max(y_max, y); plot_points.push({x, y}); }
            }
            if (!isFinite(y_min)) { y_min = -10; y_max = 10; }
            const y_range = y_max - y_min;
            if (y_range < 1) { y_min -= 2; y_max += 2; } else { y_min -= y_range * 0.2; y_max += y_range * 0.2; }

            const W = 400, H = 300, P = 30;
            const mapX = x => P + (x - x_min) / (x_max - x_min) * (W - 2 * P);
            const mapY = y => (H - P) - (y - y_min) / (y_max - y_min) * (H - 2 * P);
            
            let svg = `<svg viewBox="0 0 ${W} ${H}" class="dynamic-svg" xmlns="http://www.w3.org/2000/svg">`;
            for (let i = 1; i < 10; i++) {
                svg += `<line class="svg-grid" x1="${P+i*(W-2*P)/10}" y1="${P}" x2="${P+i*(W-2*P)/10}" y2="${H-P}"/>`;
                svg += `<line class="svg-grid" x1="${P}" y1="${P+i*(H-2*P)/10}" x2="${W-P}" y2="${P+i*(H-2*P)/10}"/>`;
            }
            const originX = mapX(0), originY = mapY(0);
            if(originX >= P && originX <= W-P) svg += `<line class="svg-axis" x1="${originX}" y1="${P}" x2="${originX}" y2="${H-P}"/>`;
            if(originY >= P && originY <= H-P) svg += `<line class="svg-axis" x1="${P}" y1="${originY}" x2="${W-P}" y2="${originY}"/>`;

            if (plot_points.length > 1) {
                const path_data = plot_points.map((p, i) => `${i === 0 ? 'M' : 'L'} ${mapX(p.x)} ${mapY(p.y)}`).join(' ');
                svg += `<path class="svg-curve" d="${path_data}"/>`;
            }
            
            roots.forEach((r, i) => {
                if(originY >= P && originY <= H-P) {
                    const rootX = mapX(r);
                    svg += `<circle class="svg-root" cx="${rootX}" cy="${originY}" r="4"/>`;
                    
                    // Add a text label for the root, alternating position to avoid overlap
                    const yOffset = (i % 2 === 0) ? -10 : 20; // Above for even index, below for odd
                    const textY = originY + yOffset;
                    svg += `<text class="svg-root-label" x="${rootX}" y="${textY}" text-anchor="middle">${r.toFixed(2)}</text>`;
                }
            });

            svg += `<text class="svg-text" x="${P}" y="${H-P+12}" text-anchor="start">${x_min.toFixed(1)}</text>`;
            svg += `<text class="svg-text" x="${W-P}" y="${H-P+12}" text-anchor="end">${x_max.toFixed(1)}</text>`;
            svg += `<text class="svg-text" x="${P-5}" y="${P+4}" text-anchor="end">${y_max.toFixed(1)}</text>`;
            svg += `<text class="svg-text" x="${P-5}" y="${H-P}" text-anchor="end">${y_min.toFixed(1)}</text>`;
            svg += `</svg>`;
            container.innerHTML = svg;
        }

        function fillStaticContent() {
            const icon = `<svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /></svg>`;
            const createAccordionItem = (title, content) => `<div class="accordion-item"><button class="accordion-button" aria-expanded="false"><span>${title}</span>${icon}</button><div class="accordion-content"><div class="content-inner">${content}</div></div></div>`;
            
            document.getElementById('theory').innerHTML = `<div class="card">
                <h3>Fundamentos y Estrategias</h3>
                ${createAccordionItem('1. Forma General y Reducción', `<p>La ecuación cúbica general se escribe como \\( ax^3 + bx^2 + cx + d = 0 \\) con \\(a \\neq 0\\). El primer paso algebraico es aplicar la sustitución de Vieta \\( x = y - \\frac{b}{3a} \\). Esta transformación elimina el término cuadrático (\\(x^2\\)), simplificando la ecuación a su <strong>forma reducida</strong>:</p><div class="math-display">\\[ y^3 + py + q = 0 \\]</div><p>donde los nuevos coeficientes \\(p\\) y \\(q\\) se calculan a partir de los originales:</p><div class="math-display">\\[ p = \\frac{3ac - b^2}{3a^2} \\quad , \\quad q = \\frac{2b^3 - 9abc + 27a^2d}{27a^3} \\]</div>`)}
                ${createAccordionItem('2. El Discriminante Cúbico', `<p>El discriminante, \\(\\Delta\\), es un valor que determina la naturaleza de las raíces. Para la forma reducida, se calcula como:</p><div class="math-display">\\[ \\Delta = -4p^3 - 27q^2 \\]</div><ul><li><strong>\\(\\Delta > 0\\):</strong> Tres raíces reales distintas.</li><li><strong>\\(\\Delta = 0\\):</strong> Raíces reales con al menos una repetida.</li><li><strong>\\(\\Delta < 0\\):</strong> Una raíz real y un par de raíces complejas conjugadas.</li></ul><p><em>Nota: Para la forma general, el discriminante es \\(\\Delta = 18abcd - 4b^3d + b^2c^2 - 4ac^3 - 27a^2d^2\\), lo que demuestra la gran utilidad de la reducción.</em></p>`)}
                ${createAccordionItem('3. La Fórmula General', `<p>Una vez en forma reducida, la solución para \\(y\\) depende del signo del discriminante:</p><p><strong>Caso \\(\\Delta \\le 0\\) (Fórmula de Cardano):</strong></p><div class="math-display">\\[ y = \\sqrt[3]{-\\frac{q}{2} + \\sqrt{\\frac{q^2}{4} + \\frac{p^3}{27}}} + \\sqrt[3]{-\\frac{q}{2} - \\sqrt{\\frac{q^2}{4} + \\frac{p^3}{27}}} \\]</div><p><strong>Caso \\(\\Delta > 0\\) (Solución Trigonométrica - <em>Casus Irreductibilis</em>):</strong></p><div class="math-display">\\[ y_k = 2\\sqrt{-\\frac{p}{3}} \\cos\\left(\\frac{1}{3}\\arccos\\left(\\frac{3q}{2p}\\sqrt{\\frac{-3}{p}}\\right) + \\frac{2\\pi k}{3}\\right) \\]</div><p>para \\(k=0, 1, 2\\). Finalmente, se recuperan las raíces \\(x\\) deshaciendo la sustitución: \\(x_k = y_k - b/3a\\).</p>`)}
                ${createAccordionItem('4. Fórmulas de Vieta', `<p>Relacionan los coeficientes con las raíces \\(x_1, x_2, x_3\\), útiles para verificar soluciones.</p><ul><li>\\(x_1 + x_2 + x_3 = -b/a\\)</li><li>\\(x_1x_2 + x_1x_3 + x_2x_3 = c/a\\)</li><li>\\(x_1x_2x_3 = -d/a\\)</li></ul>`)}
                ${createAccordionItem('5. Casos Especiales y Atajos', `<p>Antes de usar la fórmula general, inspeccionar la ecuación puede revelar un camino más simple:</p><ul><li><strong>Si d=0:</strong> Una raíz es \\(x_1=0\\). Las otras dos son la solución de la cuadrática \\(ax^2+bx+c=0\\).</li><li><strong>Si b=0 y c=0:</strong> La solución es directa: \\(x = \\sqrt[3]{-d/a}\\).</li><li><strong>Raíces Racionales (Teorema de Gauss):</strong> Si los coeficientes son enteros, se pueden probar los divisores de \\(d\\) y \\(a\\) para encontrar una raíz simple y reducir el polinomio.</li></ul>`)}
            </div>`;

            document.getElementById('history').innerHTML = `<div class="card"><h3>Una Saga de Secretos, Duelos y Genio</h3><p>La solución de la ecuación cúbica es una de las historias más dramáticas de las matemáticas, centrada en la Italia del Renacimiento.</p><div class="timeline"><div class="timeline-item"><span class="timeline-date">c. 1515: Scipione del Ferro</span><p>Profesor en Bolonia, es el primero en resolver la cúbica reducida \\(x^3+px=q\\). Guarda su método como un secreto para ganar debates académicos.</p></div><div class="timeline-item"><span class="timeline-date">1535: Niccolò "Tartaglia"</span><p>Matemático autodidacta, redescubre la solución y la usa para humillar a un rival en un duelo matemático público.</p></div><div class="timeline-item"><span class="timeline-date">1539: Gerolamo Cardano</span><p>Un erudito de Milán, convence a Tartaglia para que le revele el secreto bajo juramento de no publicarlo. Junto a su estudiante Ferrari, resuelven también la cuártica.</p></div><div class="timeline-item"><span class="timeline-date">1545: La Publicación en "Ars Magna"</span><p>Cardano descubre que Del Ferro fue el primero, se siente liberado del juramento y publica la solución en su obra <em>Ars Magna</em>, dando crédito a ambos pero enfureciendo a Tartaglia.</p></div><div class="timeline-item"><span class="timeline-date">El Legado: Números Complejos</span><p>La fórmula reveló el <em>casus irreductibilis</em>: para resolver ecuaciones con tres raíces reales, se requería pasar por números "imposibles" (complejos). Este fue el catalizador que obligó a los matemáticos a aceptarlos como herramientas indispensables.</p></div></div></div>`;
            
            document.getElementById('examples').innerHTML = `<div class="card"><h3>Ejemplos Resueltos</h3>${createAccordionItem('Ejemplo 1: Una Raíz Real (\\(\\Delta < 0\\))',`<p><strong>Ecuación:</strong> \\(x^3 + 3x - 4 = 0\\)</p><p><strong>Análisis:</strong> Con \\(a=1, c=3, d=-4\\), \\(\\Delta = -540\\). Negativo, por lo que hay una raíz real.</p><p><strong>Solución:</strong> La raíz es \\(x_1=1\\). La calculadora mostrará \\(x_1 = 1\\) (aprox. 1.00).</p><p><em>(Pruebe con a=1, b=0, c=3, d=-4)</em></p>`)}${createAccordionItem('Ejemplo 2: Raíces Múltiples (\\(\\Delta = 0\\))',`<p><strong>Ecuación:</strong> \\(x^3 - 3x + 2 = 0\\)</p><p><strong>Análisis:</strong> Con \\(a=1, c=-3, d=2\\), \\(\\Delta = 0\\). Raíces múltiples.</p><p><strong>Solución:</strong> Las raíces son \\(x_1 = -2\\) y \\(x_{2,3}=1\\) (raíz doble).</p><p><em>(Pruebe con a=1, b=0, c=-3, d=2)</em></p>`)}${createAccordionItem('Ejemplo 3: Tres Raíces Reales (\\(\\Delta > 0\\))',`<p><strong>Ecuación:</strong> \\(x^3 - 3x + 1 = 0\\)</p><p><strong>Análisis:</strong> Con \\(a=1, c=-3, d=1\\), \\(\\Delta = 81\\). Positivo, por lo que hay tres raíces reales.</p><p><strong>Solución:</strong> Las raíces son irracionales. La calculadora mostrará sus valores de alta precisión y su aproximación: \\(x_1 \\approx -1.88\\), \\(x_2 \\approx 0.35\\), \\(x_3 \\approx 1.53\\).</p><p><em>(Pruebe con a=1, b=0, c=-3, d=1)</em></p>`)}</div>`;

            document.querySelectorAll('.accordion-button').forEach(button => { button.addEventListener('click', () => { const content = button.nextElementSibling, isExpanded = button.getAttribute('aria-expanded') === 'true'; button.setAttribute('aria-expanded', !isExpanded); content.style.maxHeight = !isExpanded ? content.scrollHeight + 'px' : '0px'; }); });
        }
    </script>
</body>
</html>